{% include 'base.html' %}
{% load static %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
<html>
<body>
<link rel="stylesheet" type="text/css" href="{% static 'organizer/style.css' %}">
{% if user in course.users.all%}


<h1>{{ course.class_name }}</h1>


<label for="enrollment" id=enrollment name=enrollment>Total Enrollment: {{course.enrollment}}</label>
{% csrf_token %}
<h2>Students</h2>
{% if course.users%}
    {% for user in course.users.all%}
        <li>{{user.username}}</li>
    {% endfor %}
</ul>
{% endif %}

{% if slug%}
<h2>Class PDFs: <div class="mr-1 badge badge-info"> {{slug}}</div></h2>
{% else %}
<h2>Class PDFs</h2>
{% endif %}

<p>Common Tags: 
    {% for mt in common_tags %}
        <a href="#" class="badge badge-success">{{mt}}</a>
    {% endfor %}
</p>
<div class="overflow-auto">
{% for note in notes%}
    {% with uploaded_note=note.file %}   
    <li class="list-group-item">
    <a href="{{ uploaded_note.url }}">{{ uploaded_note.name }}</a>
    <small>({{ uploaded_note.size|filesizeformat }})</small>
    {% for tag in note.tags.all %}
    <a href="{% url 'organizer:tagged' course.class_name tag.slug %}" class="mr-1 badge badge-info">{{tag}} </a>
    {% endfor %}
    {% endwith %}
    </li>

{% endfor %}
</div>
<br>
<form enctype='multipart/form-data' action="{% url 'organizer:upload_file' course.class_name%}" method="POST" data-ajax="false">
{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Add Notes"/>
</form> 
{% else %}

<p>You are not a currently a student in this class.</p>
<form action="{% url 'organizer:join_class' course.class_name%}" method="post">
{% csrf_token %}
<button class="btn btn-primary" type="submit">Join Class</button>
</form>



{% endif %}

<h2>Reviews</h2>

{% for element in reviews %}
    {{element.class_Instructor}} - 
    {{element.course}}:
    {{element.review}}
<br>
{% endfor %}

<br>

<a class="btn btn-primary" role="button" href="{% url 'organizer:classes' %}">See All Classes</a>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>



